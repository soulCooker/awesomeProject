236. 二叉树的最近公共祖先
中等
相关标签
相关企业
给定一个二叉树, 找到该树中两个指定节点的最近公共祖先。

百度百科中最近公共祖先的定义为：“对于有根树 T 的两个节点 p、q，最近公共祖先表示为一个节点 x，满足 x 是 p、q 的祖先且 x 的深度尽可能大（一个节点也可以是它自己的祖先）。”

 

示例 1：
![alt text](../../img/binarytree.png)

输入：root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
输出：3
解释：节点 5 和节点 1 的最近公共祖先是节点 3 。
示例 2：
![alt text](<../../img/binarytree (1).png>)

输入：root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
输出：5
解释：节点 5 和节点 4 的最近公共祖先是节点 5 。因为根据定义最近公共祖先节点可以为节点本身。
示例 3：

输入：root = [1,2], p = 1, q = 2
输出：1
 

提示：

树中节点数目在范围 [2, 105] 内。
-109 <= Node.val <= 109
所有 Node.val 互不相同 。
p != q
p 和 q 均存在于给定的二叉树中。

思路：
深度优先遍历，x是p，q的祖先，后序遍历，如果左右子树的节点或者当前节点中包含目标值p，q，那么x就是p，q的公共祖先。通过深度优先遍历找到的第一个祖先，深度肯定是最大的，就是最近公共祖先。
可以用两个bool变量分别表示当前节点是否是p，q的祖先，后序判断节点的左右子树是否为p，q的共同祖先。节点可以继承子节点的p，q祖先属性。

伪代码：
初始化p，q祖先是否找到变量
初始化节点栈

节点栈不为空时循环处理
    取栈顶节点
    节点未访问
        将节点的左右子树入栈
        节点设置为已访问
    节点已访问
        判断 左右子树是否为p的祖先 或 节点值等于p，为p祖先
        判断 左右子树是否为q的祖先 或 节点值等于q，为q祖先

        更新当前树节点是否为p、q的祖先的属性
        如果当前树节点同时为p、q的祖先，返回当前节点
        否则节点出栈，

返回空